#!/bin/bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î –≤ –æ–¥–∏–Ω –∫–ª–∏–∫!

echo "üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase..."
echo ""

PROJECT_REF="${SUPABASE_PROJECT_REF:-<project-ref>}"
SQL_FILE="$(dirname "$0")/supabase/complete_setup.sql"

# –ö–æ–ø–∏—Ä—É–µ–º SQL –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
if command -v pbcopy >/dev/null 2>&1; then
  cat "$SQL_FILE" | pbcopy
  echo "‚úÖ SQL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!"
else
  echo "‚ÑπÔ∏è  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL –≤—Ä—É—á–Ω—É—é: $SQL_FILE"
fi

echo ""
echo "üåê –û—Ç–∫—Ä—ã–≤–∞—é Supabase SQL Editor..."

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä
open "https://supabase.com/dashboard/project/${PROJECT_REF}/sql/new"

sleep 2

echo ""
echo "================================================================================"
echo "üìã –û–°–¢–ê–õ–û–°–¨ –°–î–ï–õ–ê–¢–¨:"
echo "================================================================================"
echo ""
echo "1. ‚úÖ SQL —É–∂–µ –≤ –±—É—Ñ–µ—Ä–µ –æ–±–º–µ–Ω–∞"
echo "2. üìù –ù–∞–∂–º–∏—Ç–µ Cmd+V –≤ SQL Editor"  
echo "3. ‚ñ∂Ô∏è  –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É RUN (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)"
echo "4. ‚è≥ –î–æ–∂–¥–∏—Ç–µ—Å—å 'Success'"
echo ""
echo "ü§ñ –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!"
echo ""
